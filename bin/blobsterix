#!/usr/bin/env ruby
#require 'goliath'
require 'goliath/api'
require 'goliath/runner'

require 'blobsterix'

# runner = Goliath::Runner.new(ARGV, nil)
# runner.api = BlobServer::Service.new
# runner.app = Goliath::Rack::Builder.build(BlobServer::Service, runner.api)
# runner.run

class Generator
  def initialize(args)
    args.each{|command|
      @param ||= command if command != "generate" and @type
      @type ||= command if command != "generate"
    }
  end

  def run()
    puts "Doing #{@type} with #{@param} in #{Dir.pwd}"
  end
end


exit if ARGV.length == 0
if ARGV[0] == "server"
  runner = Goliath::Runner.new(ARGV, nil)
  runner.api = BlobServer::Service.new
  runner.app = Goliath::Rack::Builder.build(BlobServer::Service, runner.api)
  runner.run
elsif ARGV[0] == "generate"
  Generator.new(ARGV).run
end
