<!DOCTYPE html>

<!--
  Google HTML5 slide template

  Authors: Luke Mahé (code)
           Marcin Wichary (code and design)
           
           Dominic Mazzoni (browser compatibility)
           Charles Chen (ChromeVox support)

  URL: http://code.google.com/p/html5slides/
-->

<html>
  <head>
    <title>Presentation</title>

    <meta charset='utf-8'>
    <script
      src='http://html5slides.googlecode.com/svn/trunk/slides.js'></script>
      <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
      <script src="js/jquery.Jcrop.min.js"></script>
      <link rel="stylesheet" href="css/jquery.Jcrop.css" type="text/css" />

      <script language="Javascript">
          timeout = null
          function showCoords(c)
          {
              // variables can be accessed here as
              // c.x, c.y, c.x2, c.y2, c.w, c.h
              if (timeout != null)
                clearTimeout(timeout);

              timeout = setTimeout(function() {
                console.log("change url")
                $("#out").attr("src", "/blob/crop_"+c.w+"x"+c.h+"+"+c.x+"+"+c.y+"/presentation/crop.png")
                $("#croplink").text("/blob/crop_"+c.w+"x"+c.h+"+"+c.x+"+"+c.y+"/presentation/crop.png")
              }, 150);
          };
      </script>
  </head>
  
  <style>
    /* Your individual styles here, or just use inline styles if that’s
       what you want. */
    .experteer {
      background: white url('experteer.png') 50% 50% no-repeat !important;
    }

    .slides.template-default > article:not(.nobackground):not(.biglogo) {
      background: url('experteer.png') 690px 625px no-repeat !important;  
      
      background-color: white !important;  
    }
    
  </style>

  <body style='display: none'>

    <section class='slides layout-regular template-default'>
      
      <!-- Your slides (<article>s) go here. Delete or comment out the
           slides below. -->
        
        
      
      <article class='biglogo experteer'>
      </article>

      <article>
        <h1>
          Blobsterix
        </h1>
        <h2>A new way to manage (binary) content
        </h2>
        <p>
          Daniel Sudmann
          <br>
          Nov, 18 2013
        </p>
      </article>
      
      <article>
        <h1>History</h1>
      </article>
      
      <article>
        <h3>
          History
        </h3>
        <ul>
          <li>Currently all binary content is served through the application servers
          (cpu cicles, traffic)</li>
          <li>All images have to be saved in all relevant formats at all times</li>
          <li>Introducing new formats/sizes is PITA</li>
          <li>Optimizing for mobile (WebP) is hard (content negotiation not
          implemented/hard to do)</li>
          <li>Lots of code just to handle binaries</li>
        </ul>
      </article>

      <article>
        <h1>Blobsterix</h1>
      </article>
      
      <article>
        <h3>
          Higher level goals
        </h3>
        <ul>
          <li>Give flexibility for storing arbitrary things and transform them</li>
          <li>Give flexibility for optimizations (mobile)</li>
          <li>Extract service to make main app smaller</li>
          <li>Releasing Blobsterix as OS to show how cool we are (HR)</li>
          <li>Give challenging task to students</li>
          <li>Exploring new technologies</li>
        </ul>
      </article>

      
      <article>
        <h1>Requirements (main)</h1>
      </article>
      
      <article>
        <h3>
          Goals
        </h3>
        <ul>
          <li>Only store one source version of a file in the permanent storage</li>
          <li>Be able to serve the file in different formats</li>
          <li>Caching the derived versions of a file</li>
          <li>Manage access to formats and file without the application backend</li>
          <li>No application code in Blobsterix (zero config, share
          nothing)</li>
        </ul>
      </article>

      
      
      <article>
        <h1>
          Examples
        </h1>
      </article>
      
      <article>
        <h3>
          Cropping
        </h3>
        <p>
          <img id="target" src='crop.png'>
          <div id="croplink"></div>
          <img style="border-color: black;border: solid" id="out">
          <script language="Javascript">
          jQuery(function($) {
            $('#target').Jcrop({
              onSelect: showCoords,
              onChange: showCoords
            });
          });
          </script>
        </p>
      </article>
      
      <article>
        <h3>
          Scaling
        </h3>
          <form>
            <input id="scale"><button id="scalebutton">Scale</button>
            <img id="scaletarget" src='syncview21.png'>
          </form>
          <div id="scalelink"></div>
          <script language="Javascript">
            jQuery(function($) {
              $('#scalebutton').click(function(){
                $("#scalelink").text("/blob/resize_"+$('#scale').val()+"/presentation/syncview21.png")
                $("#scaletarget").attr("src", "/blob/resize_"+$('#scale').val()+"/presentation/syncview21.png")
              });
            });
          </script>
      </article>


      <article>
        <h3>
          Use cases
        </h3>
        <ul>
          <li>It allows for on the fly transformation of images (format and
          content) </li>
          <li>It does content negotiation with the client</li>
          <li>Images can be scaled, cropped, recolored and even water marked</li>
          <li>PDFs could be renderer to html</li>
          <li>URLs contents could be downloaded and be cached (job
          screenshots ;-) )</li>
          <li>http://cloudinary.com/</li>
        </ul>
      </article>

      <article>
        <h1>
          Dependencies
        </h1>
        <ul>
          <li>ruby 1.9 (fibers)</li>
          <li>lighttpd 1.5 (if you want X-Sendfile)</li>
          <li>goliath</li>
        </ul>
      </article>

      <article>
        <h1>
          Architecture
        </h1>
      </article>

      <article>
        <h3>
          Interface
        </h3>
        <ol>
        <li>A s3 compatible interface that allows upload and download of content
        (internal use only)</li>
        <li>An external access point that serves content transformed for the
        client (manipulation secured and time secured)</li>
        </ol>
      </article>

      <article>
        <h3>
          Internal architecture
        </h3>
        <p>
        <img src="images/arch1.png" width="600px"/>
        </p>
      </article>

      <article>
        <h3>
          Going forward
        </h3>
        <p>
          Making it robust and production ready until end of November (monitoring, client
          code)
        </p>
        <p>
          Development of migration plan because of the dependencies. Either
          change our ops and/or wait until we're ruby 2.0 capable. 
        </p>
        <p>
          Migrate current assets system to Blobsterix until Q2
        </p>
      </article>

      <article>
        <h3>
          Thank you! - Questions?
        </h3>
      </article>

    </section>

  </body>
</html>
